{"version":3,"file":"view-model-registration.js","sourceRoot":"","sources":["../../src/core/view-model-registration.ts"],"names":[],"mappings":";;AAAA,0DAAiD;AACjD,8BAA4B;AAC5B,yCAA4C;AAC5C,0DAAgE;AAGhE,MAAa,qBAAqB;IAO9B,IAAW,IAAI,KAAa,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;IAChD,IAAW,SAAS,KAAe,OAAO,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;IAC5D,IAAW,QAAQ,KAAa,OAAO,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;IAGxD,YAAmB,SAAmB;QAElC,mBAAK,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC,cAAc,EAAE,CAAC;QAE/C,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,GAAY,SAAU,CAAC,WAAW,EAAE,CAAC,IAAI,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QACxE,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,WAAW,CAAC;YACjC,MAAM,IAAI,kCAAoB,CAAC,yBAAyB,IAAI,CAAC,KAAK,yCAAyC,CAAC,CAAC;QAEjH,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;QAE5B,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,yBAAc,EAAE,IAAI,CAAC,UAAU,CAAC;YACxD,MAAM,IAAI,kCAAoB,CAAC,aAAa,IAAI,CAAC,IAAI,oCAAoC,CAAC,CAAC;QAE/F,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,cAAc,CAAC,yBAAc,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;IAC7E,CAAC;CACJ;AA3BD,sDA2BC","sourcesContent":["import { given } from \"@nivinjoseph/n-defensive\";\nimport \"@nivinjoseph/n-ext\";\nimport { templateSymbol } from \"./template\";\nimport { ApplicationException } from \"@nivinjoseph/n-exception\";\n\n\nexport class ViewModelRegistration\n{\n    private readonly _name: string;\n    private readonly _viewModel: Function;\n    private readonly _template: string;\n    \n    \n    public get name(): string { return this._name; }\n    public get viewModel(): Function { return this._viewModel; }\n    public get template(): string { return this._template; }\n    \n    \n    public constructor(viewModel: Function)\n    {\n        given(viewModel, \"viewModel\").ensureHasValue();\n        \n        this._name = (\" \" + (<Object>viewModel).getTypeName().trim()).substr(1); // Shrey: Safari de-optimization\n        if (!this._name.endsWith(\"ViewModel\"))\n            throw new ApplicationException(`Registered ViewModel '${this._name}' violates ViewModel naming convention.`);\n        \n        this._viewModel = viewModel;\n        \n        if (!Reflect.hasOwnMetadata(templateSymbol, this._viewModel))\n            throw new ApplicationException(`ViewModel'${this.name}' does not have @template applied.`);    \n        \n        this._template = Reflect.getOwnMetadata(templateSymbol, this._viewModel);\n    }\n}"]}